<html lang="zh-CN"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>幸运抽奖系统</title>
  <!-- 引入Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 引入Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- 配置Tailwind自定义主题 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#FF6B6B',
            secondary: '#4ECDC4',
            accent: '#FFD166',
            dark: '#292F36',
            light: '#F7FFF7'
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
          animation: {
            'spin-slow': 'spin 3s linear infinite',
            'bounce-slow': 'bounce 2s infinite',
            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          }
        }
      }
    }
  </script>
  
  <!-- 自定义工具类 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .text-shadow-lg {
        text-shadow: 0 4px 8px rgba(0,0,0,0.12), 0 2px 4px rgba(0,0,0,0.08);
      }
      .prize-item {
        @apply bg-white rounded-xl shadow-lg p-4 transition-all duration-300 hover:shadow-xl hover:scale-105 cursor-pointer;
      }
      .prize-item-selected {
        @apply bg-primary text-white shadow-xl scale-105 ring-4 ring-accent;
      }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-light to-gray-100 min-h-screen font-sans text-dark">
  <!-- 顶部导航 -->
  <header class="bg-white/80 backdrop-blur-md shadow-sm fixed w-full top-0 z-50 transition-all duration-300">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <i class="fa fa-trophy text-accent text-2xl"></i>
        <h1 class="text-xl md:text-2xl font-bold bg-gradient-to-r from-primary to-secondary text-transparent bg-clip-text">幸运抽奖系统</h1>
      </div>
      <div class="flex items-center space-x-4">
        <button id="resetBtn" class="hidden md:flex items-center space-x-1 text-gray-600 hover:text-primary transition-colors">
          <i class="fa fa-refresh"></i>
          <span>重置</span>
        </button>
        <button id="historyBtn" class="hidden md:flex items-center space-x-1 text-gray-600 hover:text-primary transition-colors">
          <i class="fa fa-history"></i>
          <span>历史</span>
        </button>
        <button id="mobileMenuBtn" class="md:hidden text-gray-600">
          <i class="fa fa-bars text-xl"></i>
        </button>
      </div>
    </div>
    <!-- 移动端菜单 -->
    <div id="mobileMenu" class="hidden md:hidden bg-white border-t animate-fadeIn">
      <div class="container mx-auto px-4 py-2 flex flex-col space-y-3">
        <button id="mobileResetBtn" class="flex items-center space-x-2 py-2 text-gray-600 hover:text-primary transition-colors">
          <i class="fa fa-refresh w-5 text-center"></i>
          <span>重置抽奖</span>
        </button>
        <button id="mobileHistoryBtn" class="flex items-center space-x-2 py-2 text-gray-600 hover:text-primary transition-colors">
          <i class="fa fa-history w-5 text-center"></i>
          <span>抽奖历史</span>
        </button>
      </div>
    </div>
  </header>

  <!-- 主要内容 -->
  <main class="container mx-auto px-4 pt-24 pb-16">
    <!-- 抽奖介绍 -->
    <section class="text-center mb-12 max-w-3xl mx-auto">
      <h2 class="text-[clamp(1.8rem,5vw,2.8rem)] font-bold mb-4 text-shadow-lg bg-gradient-to-r from-primary to-secondary text-transparent bg-clip-text">
        幸运大抽奖
      </h2>
      <p class="text-gray-600 text-lg mb-6">
        点击开始按钮，系统将随机抽取一个幸运奖项，祝您好运！
      </p>
      <div class="flex justify-center items-center space-x-2 text-sm text-gray-500">
        <i class="fa fa-info-circle text-primary"></i>
        <span>所有抽奖过程均在本地完成，公平公正</span>
      </div>
    </section>

    <!-- 抽奖区域 -->
    <section class="max-w-5xl mx-auto mb-16">
      <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8 relative overflow-hidden">
        <!-- 装饰元素 -->
        <div class="absolute -top-10 -left-10 w-32 h-32 bg-primary/10 rounded-full"></div>
        <div class="absolute -bottom-16 -right-16 w-48 h-48 bg-secondary/10 rounded-full"></div>
        
        <!-- 抽奖结果显示 -->
        <div id="resultDisplay" class="text-center py-12 mb-8 relative z-10">
          <div id="prizeIndicator" class="w-32 h-32 md:w-48 md:h-48 mx-auto bg-gradient-to-br from-primary/10 to-secondary/10 rounded-full flex items-center justify-center mb-6">
            <i class="fa fa-gift text-4xl md:text-6xl text-primary/70"></i>
          </div>
          <h3 id="resultText" class="text-2xl md:text-3xl font-bold text-gray-700">等待抽奖...</h3>
          <p id="resultDescription" class="text-gray-500 mt-2">点击下方按钮开始抽奖</p>
        </div>
        
        <!-- 抽奖按钮 -->
        <div class="text-center relative z-10">
          <button id="drawBtn" class="bg-primary hover:bg-primary/90 text-white font-bold py-4 px-12 rounded-full text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 flex items-center justify-center mx-auto">
            <i class="fa fa-play-circle mr-2"></i>
            <span>开始抽奖</span>
          </button>
        </div>
      </div>
    </section>

    <!-- 奖项列表 -->
    <section class="max-w-5xl mx-auto mb-16">
      <h3 class="text-xl md:text-2xl font-bold mb-6 flex items-center">
        <i class="fa fa-list-alt text-primary mr-2"></i>
        奖项设置
      </h3>
      <div id="prizesContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- 奖项项将通过JS动态生成 -->
      </div>
    </section>

    <!-- 抽奖规则 -->
    <section class="max-w-3xl mx-auto bg-white rounded-2xl shadow-lg p-6 md:p-8">
      <h3 class="text-xl md:text-2xl font-bold mb-4 flex items-center">
        <i class="fa fa-book text-primary mr-2"></i>
        抽奖规则
      </h3>
      <ul class="space-y-3 text-gray-600">
        <li class="flex items-start">
          <i class="fa fa-check-circle text-secondary mt-1 mr-2"></i>
          <span>点击"开始抽奖"按钮即可参与抽奖</span>
        </li>
        <li class="flex items-start">
          <i class="fa fa-check-circle text-secondary mt-1 mr-2"></i>
          <span>系统将随机从奖项列表中抽取一个奖项</span>
        </li>
        <li class="flex items-start">
          <i class="fa fa-check-circle text-secondary mt-1 mr-2"></i>
          <span>每次抽奖结果将记录在历史记录中</span>
        </li>
        <li class="flex items-start">
          <i class="fa fa-check-circle text-secondary mt-1 mr-2"></i>
          <span>点击"重置"按钮可清除当前结果，重新开始</span>
        </li>
      </ul>
    </section>
  </main>

  <!-- 历史记录模态框 -->
  <div id="historyModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[80vh] overflow-hidden flex flex-col animate-fadeIn">
      <div class="p-6 border-b flex justify-between items-center">
        <h3 class="text-xl font-bold flex items-center">
          <i class="fa fa-history text-primary mr-2"></i>
          抽奖历史
        </h3>
        <button id="closeHistoryBtn" class="text-gray-500 hover:text-gray-700">
          <i class="fa fa-times text-xl"></i>
        </button>
      </div>
      <div id="historyList" class="flex-1 overflow-y-auto p-6 space-y-4">
        <!-- 历史记录将通过JS动态生成 -->
        <div class="text-center text-gray-500 py-12">
          <i class="fa fa-inbox text-4xl mb-3 text-gray-300"></i>
          <p>暂无抽奖记录</p>
        </div>
      </div>
      <div class="p-4 border-t flex justify-end">
        <button id="clearHistoryBtn" class="text-gray-600 hover:text-primary px-4 py-2 transition-colors">
          <i class="fa fa-trash mr-1"></i> 清空记录
        </button>
      </div>
    </div>
  </div>

  <!-- 页脚 -->
  <footer class="bg-dark text-white py-8">
    <div class="container mx-auto px-4 text-center">
      <div class="flex justify-center items-center space-x-2 mb-4">
        <i class="fa fa-trophy text-accent"></i>
        <h2 class="text-xl font-bold">幸运抽奖系统</h2>
      </div>
      <p class="text-gray-400 text-sm">
        本系统仅用于娱乐，所有抽奖过程均在本地完成
      </p>
      <p class="text-gray-500 text-xs mt-4">
        © 2023 幸运抽奖系统 - 完全前端实现
      </p>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // 奖项数据
    const prizes = [
      { id: 1, name: "一等奖", description: "iPhone 14 Pro", icon: "fa-mobile text-3xl" },
      { id: 2, name: "二等奖", description: "AirPods Pro", icon: "fa-headphones text-3xl" },
      { id: 3, name: "三等奖", description: "100元代金券", icon: "fa-ticket text-3xl" },
      { id: 4, name: "四等奖", description: "50元代金券", icon: "fa-money text-3xl" },
      { id: 5, name: "五等奖", description: "20元代金券", icon: "fa-gift text-3xl" },
      { id: 6, name: "谢谢参与", description: "再接再厉", icon: "fa-smile-o text-3xl" }
    ];
    
    // 抽奖历史记录
    let drawHistory = JSON.parse(localStorage.getItem('drawHistory')) || [];
    
    // DOM元素
    const prizesContainer = document.getElementById('prizesContainer');
    const drawBtn = document.getElementById('drawBtn');
    const resultText = document.getElementById('resultText');
    const resultDescription = document.getElementById('resultDescription');
    const prizeIndicator = document.getElementById('prizeIndicator');
    const resetBtn = document.getElementById('resetBtn');
    const mobileResetBtn = document.getElementById('mobileResetBtn');
    const historyBtn = document.getElementById('historyBtn');
    const mobileHistoryBtn = document.getElementById('mobileHistoryBtn');
    const historyModal = document.getElementById('historyModal');
    const closeHistoryBtn = document.getElementById('closeHistoryBtn');
    const historyList = document.getElementById('historyList');
    const clearHistoryBtn = document.getElementById('clearHistoryBtn');
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    
    // 初始化奖项列表
    function initPrizes() {
      prizesContainer.innerHTML = '';
      prizes.forEach(prize => {
        const prizeEl = document.createElement('div');
        prizeEl.className = 'prize-item';
        prizeEl.dataset.id = prize.id;
        prizeEl.innerHTML = `
          <div class="flex items-center justify-between mb-3">
            <h4 class="font-bold text-lg">${prize.name}</h4>
            <i class="${prize.icon} text-primary"></i>
          </div>
          <p class="text-gray-600">${prize.description}</p>
        `;
        prizesContainer.appendChild(prizeEl);
      });
    }
    
    // 更新历史记录显示
    function updateHistoryDisplay() {
      if (drawHistory.length === 0) {
        historyList.innerHTML = `
          <div class="text-center text-gray-500 py-12">
            <i class="fa fa-inbox text-4xl mb-3 text-gray-300"></i>
            <p>暂无抽奖记录</p>
          </div>
        `;
        return;
      }
      
      historyList.innerHTML = '';
      drawHistory.forEach((history, index) => {
        const historyEl = document.createElement('div');
        historyEl.className = 'bg-gray-50 rounded-lg p-4 flex justify-between items-center';
        historyEl.innerHTML = `
          <div>
            <div class="font-medium">${history.prize.name}</div>
            <div class="text-sm text-gray-500">${history.prize.description}</div>
          </div>
          <div class="text-xs text-gray-400">${history.time}</div>
        `;
        historyList.appendChild(historyEl);
      });
    }
    
    // 抽奖动画
    function drawAnimation() {
      return new Promise((resolve) => {
        let counter = 0;
        const totalSteps = 50; // 动画总步数
        const interval = 50; // 每步间隔时间(ms)，逐渐增加
        
        // 禁用按钮
        drawBtn.disabled = true;
        drawBtn.classList.add('opacity-70', 'cursor-not-allowed');
        drawBtn.innerHTML = '<i class="fa fa-spinner fa-spin mr-2"></i><span>抽奖中...</span>';
        
        // 清除所有选中状态
        document.querySelectorAll('.prize-item').forEach(item => {
          item.classList.remove('prize-item-selected');
        });
        
        // 动画步骤
        const step = () => {
          // 随机选择一个奖项
          const randomIndex = Math.floor(Math.random() * prizes.length);
          const selectedPrize = prizes[randomIndex];
          
          // 更新指示器
          resultText.textContent = selectedPrize.name;
          resultDescription.textContent = selectedPrize.description;
          
          // 更新选中状态
          document.querySelectorAll('.prize-item').forEach(item => {
            if (parseInt(item.dataset.id) === selectedPrize.id) {
              item.classList.add('prize-item-selected');
            } else {
              item.classList.remove('prize-item-selected');
            }
          });
          
          counter++;
          if (counter < totalSteps) {
            // 逐渐增加间隔时间，营造减速效果
            setTimeout(step, interval + (counter * 2));
          } else {
            // 动画结束，返回结果
            resolve(selectedPrize);
          }
        };
        
        // 开始动画
        step();
      });
    }
    
    // 执行抽奖
    async function startDraw() {
      // 执行抽奖动画并获取结果
      const winningPrize = await drawAnimation();
      
      // 更新最终结果显示
      prizeIndicator.innerHTML = `<i class="${winningPrize.icon} text-4xl md:text-6xl text-white"></i>`;
      prizeIndicator.classList.add('bg-primary');
      
      // 恢复按钮状态
      drawBtn.disabled = false;
      drawBtn.classList.remove('opacity-70', 'cursor-not-allowed');
      drawBtn.innerHTML = '<i class="fa fa-refresh mr-2"></i><span>再抽一次</span>';
      
      // 记录抽奖历史
      const now = new Date();
      const timeStr = `${now.getFullYear()}-${(now.getMonth()+1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')} ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
      
      drawHistory.unshift({
        prize: winningPrize,
        time: timeStr
      });
      
      // 限制历史记录数量为10条
      if (drawHistory.length > 10) {
        drawHistory = drawHistory.slice(0, 10);
      }
      
      // 保存到本地存储
      localStorage.setItem('drawHistory', JSON.stringify(drawHistory));
      
      // 更新历史记录显示
      updateHistoryDisplay();
    }
    
    // 重置抽奖
    function resetDraw() {
      // 重置显示
      resultText.textContent = '等待抽奖...';
      resultDescription.textContent = '点击下方按钮开始抽奖';
      prizeIndicator.innerHTML = '<i class="fa fa-gift text-4xl md:text-6xl text-primary/70"></i>';
      prizeIndicator.classList.remove('bg-primary');
      
      // 重置按钮
      drawBtn.innerHTML = '<i class="fa fa-play-circle mr-2"></i><span>开始抽奖</span>';
      
      // 清除所有选中状态
      document.querySelectorAll('.prize-item').forEach(item => {
        item.classList.remove('prize-item-selected');
      });
    }
    
    // 清空历史记录
    function clearHistory() {
      drawHistory = [];
      localStorage.removeItem('drawHistory');
      updateHistoryDisplay();
    }
    
    // 显示历史记录
    function showHistory() {
      updateHistoryDisplay();
      historyModal.classList.remove('hidden');
      historyModal.classList.add('flex');
    }
    
    // 隐藏历史记录
    function hideHistory() {
      historyModal.classList.remove('flex');
      historyModal.classList.add('hidden');
    }
    
    // 切换移动端菜单
    function toggleMobileMenu() {
      mobileMenu.classList.toggle('hidden');
    }
    
    // 事件监听
    drawBtn.addEventListener('click', startDraw);
    resetBtn.addEventListener('click', resetDraw);
    mobileResetBtn.addEventListener('click', () => {
      resetDraw();
      toggleMobileMenu();
    });
    historyBtn.addEventListener('click', showHistory);
    mobileHistoryBtn.addEventListener('click', () => {
      showHistory();
      toggleMobileMenu();
    });
    closeHistoryBtn.addEventListener('click', hideHistory);
    clearHistoryBtn.addEventListener('click', clearHistory);
    mobileMenuBtn.addEventListener('click', toggleMobileMenu);
    
    // 点击模态框外部关闭
    historyModal.addEventListener('click', (e) => {
      if (e.target === historyModal) {
        hideHistory();
      }
    });
    
    // 滚动时改变导航栏样式
    window.addEventListener('scroll', () => {
      const header = document.querySelector('header');
      if (window.scrollY > 10) {
        header.classList.add('py-2', 'shadow');
        header.classList.remove('py-3');
      } else {
        header.classList.add('py-3');
        header.classList.remove('py-2', 'shadow');
      }
    });
    
    // 初始化
    window.addEventListener('DOMContentLoaded', () => {
      initPrizes();
      updateHistoryDisplay();
    });
  </script>


</body></html>